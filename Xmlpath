import xml.etree.ElementTree as ET

xml_string = """
<root>
    <person>
        <name>John</name>
        <datatype>string</datatype>
        <address>
            <city>New York</city>
            <zip>10001</zip>
            <datatype>int</datatype>
        </address>
    </person>
    <person>
        <name>Jane</name>
        <address>
            <city>Los Angeles</city>
            <zip>90001</zip>
        </address>
    </person>
</root>
"""

tree = ET.ElementTree(ET.fromstring(xml_string))
root = tree.getroot()

# Attach parent pointers (since ElementTree doesn't have them)
def attach_parents(elem, parent=None):
    elem._parent = parent
    for child in elem:
        attach_parents(child, elem)

def getparent(self):
    return getattr(self, "_parent", None)

ET.Element.getparent = getparent
attach_parents(root)

def print_paths(element, path=""):
    # Skip <datatype> elements
    if element.tag == "datatype":
        return

    parent = element.getparent()
    if parent is not None:
        siblings = [e for e in parent if e.tag == element.tag]
        if len(siblings) > 1:
            index = siblings.index(element) + 1  # XPath is 1-based
            current_path = f"{path}/{element.tag}[{index}]"
        else:
            current_path = f"{path}/{element.tag}"
    else:
        current_path = f"/{element.tag}"

    print(current_path)

    # Recurse for children
    for child in element:
        print_paths(child, current_path)

print_paths(root)
